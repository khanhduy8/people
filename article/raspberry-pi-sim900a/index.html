<!DOCTYPE html>
<html lang="vi">

<head>
   <title> Dùng Raspberry Pi để gửi và nhận SMS với Sim900A  - The PyMiers</title>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="HandheldFriendly" content="True" />
  <meta name="robots" content="" />
  <link rel="stylesheet" type="text/css" href="/theme/css/app.css">
<link rel="stylesheet" type="text/css" href="http://pp.pymi.vn/theme/css/pygment.css">
  <!--
  <link href="https://fonts.googleapis.com/css?family=Fira+Sans" rel="stylesheet">
  -->

  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">    <meta name="author" content="Pymiers" />
  <meta name="description" content="" />    <link href="http://pp.pymi.vn/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="The PyMiers Full Atom Feed" />         
  <meta name="tags" content="raspberry" />
  <meta name="tags" content="pi" />
  <meta name="tags" content="sim" />
  <meta name="tags" content="900a" />
  <meta name="tags" content="sms" />
</head>

<body>
  <main class="wrapper">
    <section class="container">
      <header class='column'>
        <h1 class='title'><a href="http://pp.pymi.vn/">The PyMiers</a></h1>
      </header>

      <div class="section">
        <div class="row navbar">
          <div class="column nav-item is-active"><a href="http://pp.pymi.vn/category/trang-chu/">Trang chủ</a></div>
           <div class="column nav-item "><a href="http://pp.pymi.vn/pages/about/">About</a></div>
          <div class="column nav-item "><a href="http://pp.pymi.vn/pages/add/">Tạo bài viết</a></div>
          <div class="column nav-item "><a href="http://pp.pymi.vn/pages/rss/">RSS</a></div>
          <div class="column nav-item"><a href="/archives">Archives</a></div>
        </div>
      </div>
    </section>

<section class="container">
  <header>
    <h2 class="entry-title">
      <a href="http://pp.pymi.vn/article/raspberry-pi-sim900a/" rel="bookmark"
         title="Permalink to Dùng Raspberry Pi để gửi và nhận SMS với Sim900A">Dùng Raspberry Pi để gửi và nhận SMS với Sim900A</a></h2>  
  </header>
  <footer class='center'>
    <time class="published" datetime="2018-10-09T00:00:00+07:00"> 09/10/2018 </time>
    <address class="vcard author">By
                    <a class="url fn" href="http://pp.pymi.vn/author/tudoanh/">tudoanh</a>
 in <a href="http://pp.pymi.vn/category/trang-chu/">Trang chủ</a>
                </address>     <em>Tags</em>:     <a href="http://pp.pymi.vn/tag/raspberry/"><em>raspberry</em></a>,     <a href="http://pp.pymi.vn/tag/pi/"><em>pi</em></a>,     <a href="http://pp.pymi.vn/tag/sim/"><em>sim</em></a>,     <a href="http://pp.pymi.vn/tag/900a/"><em>900a</em></a>,     <a href="http://pp.pymi.vn/tag/sms/"><em>sms</em></a>    </footer>
  <br>
  <div class="entry-content">
    <p>Summary: Hướng dẫn kết nối module Sim900A với Raspberry Pi 3 B+, dùng để gửi và nhận tin nhắn SMS</p>
<p>Dạo này vì lý do công việc nên cần phải tìm cách kết nối và sử dụng module Sim900A với con Raspberry Pi 3, dùng để nhận SMS.</p>
<p>Tìm hiểu mấy hôm, rất là cực nên hôm nay mình viết lại bài này, cho những ai cần tới sau này đỡ tốn thời gian mày mò lại từ đầu.</p>
<h3>Chuẩn bị</h3>
<p>Để bắt đầu, bạn cần:</p>
<ul>
<li>
<p>Một combo <strong>Raspberry Pi 3 B+</strong> đầy đủ nguồn, thẻ nhớ, đã cài đặt <strong>Raspbian</strong></p>
</li>
<li>
<p>Một module <strong>Sim900A</strong></p>
</li>
</ul>
<p><img alt="https://i.imgur.com/vvIy62p.jpg" src="https://i.imgur.com/vvIy62p.jpg"></p>
<ul>
<li>Dây chuyển đổi USB - UART PL2303 (Có thể không có)</li>
</ul>
<p><img alt="https://i.imgur.com/wWkr422.jpg" src="https://i.imgur.com/wWkr422.jpg"></p>
<ul>
<li>Đầy đủ dây nối</li>
</ul>
<p><img alt="https://i.imgur.com/C40X3gs.png" src="https://i.imgur.com/C40X3gs.png"></p>
<h3>Kết nối</h3>
<p>Chỉ cần bạn kết nối đúng các cổng <em>Tx, Rx, Gnd và nguồn 5v</em> vào Pi là xong. Tham khảo ảnh dưới:</p>
<p><img alt="https://i.ytimg.com/vi/louSyBRkvO4/maxresdefault.jpg" src="https://i.ytimg.com/vi/louSyBRkvO4/maxresdefault.jpg"></p>
<p>Ảnh thực tế (Nếu kết nối thẳng vào GPIO)</p>
<p><img alt="https://i.imgur.com/KRanp3y.jpg" src="https://i.imgur.com/KRanp3y.jpg"></p>
<p><img alt="https://i.imgur.com/dQhoN8e.jpg" src="https://i.imgur.com/dQhoN8e.jpg"></p>
<p>Còn nếu kết nối qua USB</p>
<p><img alt="https://i.imgur.com/2DHsQCx.jpg" src="https://i.imgur.com/2DHsQCx.jpg"></p>
<h3>Cài đặt</h3>
<p>Đầu tiên ta cần mở cổng <strong>ttyS0</strong></p>
<p>Bạn có thể dùng "raspi-config" để mở UART:</p>
<p><img alt="https://i.imgur.com/NVchkKl.png" src="https://i.imgur.com/NVchkKl.png"></p>
<ol>
<li>Trong "Interfacing Options", chọn "Serial"</li>
<li>Chọn "No" khi được hỏi "You want a login shell over serial?".</li>
<li>Chọn "Yes" khi được hỏi "You want the hardware enabled?"</li>
<li>Khởi động lại</li>
</ol>
<p>Thực ra, bạn có thể sửa file <em>/boot/config.txt</em> và sửa <strong>enable_uart=1</strong>, và <strong>console=serial0,115200</strong> (hoặc <strong>console=ttyS0,115200</strong>) ở trong <em>/boot/cmdline.txt</em></p>
<p>Và bạn có thể bật <em>terminal</em> lên và test xem kết nối thành công chưa bằng cách gửi command <strong>AT\r\n</strong> đến khi nào trả về <strong>OK</strong> là thành công. (Nếu kết nối qua GPIO thì sẽ là <strong>/dev/ttyS0</strong>, còn qua USB thì sẽ là <strong>/dev/ttyUSB0</strong>)</p>
<p>Ví dụ:</p>
<p><img alt="https://i.imgur.com/59K45tV.png" src="https://i.imgur.com/59K45tV.png"></p>
<p>Link asciinema:</p>
<p><a href="https://asciinema.org/a/U3oPOg0vX4CZ5u3mWTTIr0FTS"><img alt="asciicast" src="https://asciinema.org/a/U3oPOg0vX4CZ5u3mWTTIr0FTS.png"></a></p>
<p>Sau đó bạn có thể gửi và đọc tin nhắn bằng lib mình đã viết ở đây (Ví dụ cách sử dụng ở trong link):</p>
<p>https://github.com/tudoanh/sim900a</p>
<p>Ví dụ về kết quả nhận được bằng lệnh <strong>AT+CNMI=3,2,0,0,0</strong></p>
<p><img alt="https://i.imgur.com/ecz65hk.png" src="https://i.imgur.com/ecz65hk.png"></p>
<p>Về chi tiết cách sử dụng các lệnh AT và các khái niệm GPIO, UART mình sẽ để sang một bài khác.</p>
<p>Chúc các bạn thành công.</p>
<p>Tham khảo:</p>
<ol>
<li>https://pinout.xyz/</li>
<li>http://mlab.vn/9216-huong-dan-lap-trinh-module-sim900a-va-arduino.html</li>
<li>https://www.developershome.com/sms/checkCommandSupport3.asp</li>
<li>https://raspberrypi.stackexchange.com/questions/82696/how-do-i-connect-gsm-sim-900a-to-a-raspberry-pi-3</li>
<li>https://www.espruino.com/datasheets/SIM900_AT.pdf</li>
<li>https://hristoborisov.com/index.php/projects/turning-the-raspberry-pi-into-a-sms-center-using-python/#Connecting_the_3gModem</li>
</ol>
  </div>
  <!-- /.entry-content -->
</section>
<section class="container">
  <div class="comments">
    <h3>Comments</h3>
    <div id="disqus_thread"></div>
    <script type="text/javascript">
      var disqus_shortname = 'pymier';
      var disqus_identifier = 'article/raspberry-pi-sim900a/';
      var disqus_url = 'http://pp.pymi.vn/article/raspberry-pi-sim900a/';
      (function() {
        var dsq = document.createElement('script');
        dsq.type = 'text/javascript';
        dsq.async = true;
        dsq.src = '//pymier.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
      })();
    </script>
    <noscript>Please enable JavaScript to view the comments.</noscript>
  </div>
</section>

    <section class="container footer">
      <footer>
        <address>
        Proudly powered by <a href="http://getpelican.com/">Pelican</a>,
        which takes great advantage of <a href="http://python.org">Python</a>.
        </address>
        <address>
          Học lập trình Python tại <a href="https://pymi.vn/">Pymi.vn</a>
        </address>
      </footer>
    </section>
  </main>

<script type="text/javascript">
var images = document.getElementsByTagName("img");
var i;

for(i = 0; i < images.length; i++) {
  images[i].className += " centered";
}
</script>
</body>

</html>